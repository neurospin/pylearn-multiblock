<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>parsimony.datasets</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="parsimony-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="parsimony-module.html">Package&nbsp;parsimony</a> ::
        Package&nbsp;datasets
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="parsimony.datasets-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== PACKAGE DESCRIPTION ==================== -->
<h1 class="epydoc">Package datasets</h1><p class="nomargin-top"><span class="codelink"><a href="parsimony.datasets-pysrc.html">source&nbsp;code</a></span></p>
<p>Created on Mon Apr 22 11:31:13 2013</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Tommy L&#246;fstedt and Edouard Duchesnay
      </p>
      <p><strong>License:</strong>
        TBD
      </p>
</div><!-- ==================== SUBMODULES ==================== -->
<a name="section-Submodules"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Submodules</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Submodules"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr><td class="summary">
  <ul class="nomargin">
    <li> <strong class="uidlink"><a href="parsimony.datasets.Russett-module.html">parsimony.datasets.Russett</a></strong>: <em class="summary">Created on Mon Apr 22 11:13:02 2013</em>    </li>
    <li class="private"> <strong class="uidlink"><a href="parsimony.datasets.samples_generator_nostruct-module.html" onclick="show_private();">parsimony.datasets.samples_generator_nostruct</a></strong>: <em class="summary">Created on Sun Jul 21 12:29:03 2013</em>    </li>
    <li class="private"> <strong class="uidlink"><a href="parsimony.datasets.samples_generator_struct-module.html" onclick="show_private();">parsimony.datasets.samples_generator_struct</a></strong>: <em class="summary">Created on Wed Aug  7 10:35:12 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated-module.html">parsimony.datasets.simulated</a></strong>: <em class="summary">Created on Mon Jun 18 09:26:14 2013</em>
    <ul>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.beta-module.html">parsimony.datasets.simulated.beta</a></strong>: <em class="summary">Created on Thu Sep 26 10:12:56 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.correlation_matrices-module.html">parsimony.datasets.simulated.correlation_matrices</a></strong>: <em class="summary">Created on Wed Jun 19 13:56:24 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.grad-module.html">parsimony.datasets.simulated.grad</a></strong>: <em class="summary">Created on Thu Sep 26 12:06:07 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.l1_l2_gl-module.html">parsimony.datasets.simulated.l1_l2_gl</a></strong>: <em class="summary">Created on Mon Jan 27 16:23:54 2014</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.l1_l2_glmu-module.html">parsimony.datasets.simulated.l1_l2_glmu</a></strong>: <em class="summary">Created on Tue Jan 21 21:53:33 2014</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.l1_l2_tv-module.html">parsimony.datasets.simulated.l1_l2_tv</a></strong>: <em class="summary">Created on Tue Jul 16 12:32:00 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.l1_l2_tvmu-module.html">parsimony.datasets.simulated.l1_l2_tvmu</a></strong>: <em class="summary">Created on Mon Sep  9 14:16:37 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.l1mu_l2_tvmu-module.html">parsimony.datasets.simulated.l1mu_l2_tvmu</a></strong>: <em class="summary">Created on Fri Sep 27 14:47:48 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.regression-module.html">parsimony.datasets.simulated.regression</a></strong>: <em class="summary">Created on Tue Jun 18 09:22:40 2013</em>    </li>
    <li> <strong class="uidlink"><a href="parsimony.datasets.simulated.utils-module.html">parsimony.datasets.simulated.utils</a></strong>: <em class="summary">Created on Thu Sep 26 10:50:17 2013</em>    </li>
    </ul>
    </li>
  </ul></td></tr>
</table>

<br />
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="parsimony.datasets-module.html#make_classification" class="summary-sig-name">make_classification</a>(<span class="summary-sig-arg">n_samples</span>=<span class="summary-sig-default">100</span>,
        <span class="summary-sig-arg">n_complementary_patterns</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">size_complementary_patterns</span>=<span class="summary-sig-default">2</span>,
        <span class="summary-sig-arg">n_suppressor_patterns</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">n_redundant_patterns</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">size_redundant_patterns</span>=<span class="summary-sig-default">2</span>,
        <span class="summary-sig-arg">n_independant_features</span>=<span class="summary-sig-default">2</span>,
        <span class="summary-sig-arg">n_noize</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">snr</span>=<span class="summary-sig-default">3.0</span>,
        <span class="summary-sig-arg">grp_proportion</span>=<span class="summary-sig-default">0.5</span>,
        <span class="summary-sig-arg">random_seed</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">full_info</span>=<span class="summary-sig-default">False</span>)</span><br />
      Generate classification samples with features having a covariance
structure.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="parsimony.datasets.samples_generator_nostruct-pysrc.html#make_classification">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="parsimony.datasets-module.html#make_regression_struct" class="summary-sig-name">make_regression_struct</a>(<span class="summary-sig-arg">n_samples</span>=<span class="summary-sig-default">100</span>,
        <span class="summary-sig-arg">shape</span>=<span class="summary-sig-default"><code class="variable-group">(</code>30<code class="variable-op">, </code>30<code class="variable-op">, </code>1<code class="variable-group">)</code></span>,
        <span class="summary-sig-arg">r2</span>=<span class="summary-sig-default">0.75</span>,
        <span class="summary-sig-arg">sigma_spatial_smoothing</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">object_pixel_ratio</span>=<span class="summary-sig-default">0.5</span>,
        <span class="summary-sig-arg">objects</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">random_seed</span>=<span class="summary-sig-default">None</span>)</span><br />
      Generates regression samples (images + target variable) and beta.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="parsimony.datasets.samples_generator_struct-pysrc.html#make_regression_struct">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="parsimony.datasets-module.html#make_classification_struct" class="summary-sig-name">make_classification_struct</a>(<span class="summary-sig-arg">n_samples</span>=<span class="summary-sig-default">100</span>,
        <span class="summary-sig-arg">shape</span>=<span class="summary-sig-default"><code class="variable-group">(</code>30<code class="variable-op">, </code>30<code class="variable-op">, </code>1<code class="variable-group">)</code></span>,
        <span class="summary-sig-arg">snr</span>=<span class="summary-sig-default">2.0</span>,
        <span class="summary-sig-arg">sigma_logit</span>=<span class="summary-sig-default">5.0</span>,
        <span class="summary-sig-arg">random_seed</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">**kwargs</span>)</span><br />
      Generate classification samples (images + target variable) and beta.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="parsimony.datasets.samples_generator_struct-pysrc.html#make_classification_struct">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'parsimony.datasets'"><code class="variable-quote">'</code><code class="variable-string">parsimony.datasets</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="make_classification"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">make_classification</span>(<span class="sig-arg">n_samples</span>=<span class="sig-default">100</span>,
        <span class="sig-arg">n_complementary_patterns</span>=<span class="sig-default">1</span>,
        <span class="sig-arg">size_complementary_patterns</span>=<span class="sig-default">2</span>,
        <span class="sig-arg">n_suppressor_patterns</span>=<span class="sig-default">1</span>,
        <span class="sig-arg">n_redundant_patterns</span>=<span class="sig-default">1</span>,
        <span class="sig-arg">size_redundant_patterns</span>=<span class="sig-default">2</span>,
        <span class="sig-arg">n_independant_features</span>=<span class="sig-default">2</span>,
        <span class="sig-arg">n_noize</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">snr</span>=<span class="sig-default">3.0</span>,
        <span class="sig-arg">grp_proportion</span>=<span class="sig-default">0.5</span>,
        <span class="sig-arg">random_seed</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">full_info</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="parsimony.datasets.samples_generator_nostruct-pysrc.html#make_classification">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Generate classification samples with features having a covariance
structure.

The function creates patterns of informative features with a structure
of covariance. This covariance structure may be of four types:
(1) Independant features:
The is no covariance betwenne informative features. It is the
&quot;n_independant_features&quot; parameter (&quot;n_redundant_patterns parameter&quot;).

(2) Pattern of redundant features:
The covariance between features is mixed up with the predictive
information. Thus each feature of the pattern carries the same predictive
information, ie.: the features of the pattern are redundant. A predictive
algorithm need only to select one of them to exploit the predictive
information contained in the pattern

(3) Pattern of complementary features:
The covariance between features is orthogonal with the predictive
information. Thus the difference of two features within the pattern will
cancel out non predictive information resulting to a highly predictive
pattern. This is controled by the &quot;n_complementary_patterns&quot;.

(4) Pattern of one informative feature an one suppressor feature.
The covariance between features is independant to the predictive
information. And one feature of the pattern carries predictive information.
So any other feature of the pattern will cancel out non predictive
information resulting to a highly predictive pattern.
This is controled by the &quot;n_suppressor_patterns&quot;.

The SNR (Mahalanobis distance) is distributed accross informative features
such that the mean of SNR individual feature is constant for all patterns.
Thus we can observ additionnal SNR emerging from features covariation.

Parameters
----------

n_samples: int
    nb of samples, default 100.

n_complementary_patterns: int
    Number of patterns made of complementary features. In those patterns
    of features, groups means is orthogonal to shared variance, ie.: the
    predictive information is in un-shared variance. Features provide
    complementary information. All (at least two of them) features should
    be included in a predictive model to exploit the pattern. The
    orientation of the group means is colinear to the smallest eigen
    vector. Default 1.

size_complementary_patterns: int
    The number of features in each pattern. Default 2.

n_suppressor_patterns: int
    Number of patterns made of 2 features: one is linked with the target
    an the other acts as a suppressor variable.

n_redundant_patterns: int
    Number of patterns made of redundant features. In those patterns
    of features, groups means is colinear to shared variance, ie.: the
    predictive information is in shared variance. Features provide
    redundant predictive information. Only one feature should
    be included in a predictive model to exploit the pattern. The
    orientation of the group means is colinear to the largest eigen vector.
    Default 1.

size_redundant_patterns: int
    The number of features in each pattern. Default 2.

n_independant_features: int
    Number of &quot;independant&quot; informative features.

n_noize:
    Number of non informative features. Default 10 * number of informative
    features.

snr: float
    Global Signal to noize ratio ie.: the Mahalanobis distance between
    the two groups.

grp_proportion: float
    The proportion of samples of the first group. Default 0.5

full_info: bool
    If False (default) return only X and y. Otherwise return.

random_seed: None or int
    See numpy.random.seed(). If not None, it can be used to obtain
    reproducable samples.

Returns
-------
X : array of shape [n_samples, n_features]
    The generated samples.

y : array of shape [n_samples]
    The integer labels for class membership of each sample.

If full_info is True, also return:

weigths: arrays of shape [n_informative_features]
    The weigths of a Fisher's linear discriminant function, knowing
    the true covariance and mean os the data: Sigma^-1 (m1 - m0)

m0, m1: arrays of shape [n_informative_features]
    The means of the two classes, for the informative_features only.
    Those means were used to generate multivariate normal samples.

Cov: array of shape [n_informative_features, n_informative_features]
    The within class covariance for the informative_features only.
    This covariance was used to generate multivariate normal samples.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="make_regression_struct"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">make_regression_struct</span>(<span class="sig-arg">n_samples</span>=<span class="sig-default">100</span>,
        <span class="sig-arg">shape</span>=<span class="sig-default"><code class="variable-group">(</code>30<code class="variable-op">, </code>30<code class="variable-op">, </code>1<code class="variable-group">)</code></span>,
        <span class="sig-arg">r2</span>=<span class="sig-default">0.75</span>,
        <span class="sig-arg">sigma_spatial_smoothing</span>=<span class="sig-default">1</span>,
        <span class="sig-arg">object_pixel_ratio</span>=<span class="sig-default">0.5</span>,
        <span class="sig-arg">objects</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">random_seed</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="parsimony.datasets.samples_generator_struct-pysrc.html#make_regression_struct">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Generates regression samples (images + target variable) and beta.

Input features (X) covariance structure is controled both at a pixel
level (spatial smoothing) and object level. Objects are component
of pixels sharing a covariance that stem from a latent variable.
beta is non null within objects (default is five dots).
Then y is obtained with y = X * beta + noise, where beta is scalled such
that r_square(y, X * beta) = r2 and noise is sampled according to N(0, 1).

Parameters
----------
n_samples: Integer. Number of samples. Default is 100.

# TODO: This is wrong. Shape should be Z, Y, X.
shape: Tuple or list with three integers. Order x, y, z shape each samples
        Default is (30, 30, 1).

r2: Float. The desire R-squared (explained variance) ie.:
        r_square(y, X * beta) = r2 (Default is .75)

sigma_spatial_smoothing: Float. Standard deviation for Gaussian kernel
        (default is 1). High value promotes spatial correlation pixels.

object_pixel_ratio: Float. Controls the ratio between object-level signal
        and pixel-level signal for pixels within objects. If
        object_pixel_ratio == 1 then 100% of the signal of pixels within
        the same object is shared (ie.: no pixel level) signal. If
        object_pixel_ratio == 0 then all the signal is pixel specific.
        High object_pixel_ratio promotes spatial correlation between
        pixels of the same object.

objects: List of objects. Objects carying information to be drawn in the
        image. If not provide a dice with five points (object) will be
        drawn. Point 1, 3, 4 are carying predictive information while
        point 2 is a suppressor of point 1 and point 5 is a suppressor of
        point 3. Object should implement &quot;get_mask()&quot; method, a have
        &quot;is_suppressor&quot; (bool) and &quot;r&quot; (ref to suppressor object,
        possibely None) attributes.

random_seed: None or integer. See numpy.random.seed(). If not None, it can
        be used to obtain reproducable samples.

Returns
-------
X3d: Numpy array of shape [n_sample, shape]. The input features.

y: Numpy array of shape [n_sample, 1]. The target variable.

beta3d: Numpy array of shape [shape,]. It is the beta such that
        y = X * beta + noise.

Details
-------
The general procedure is:
    1) For each pixel i, Generate independant variables Xi ~ N(0, 1)
    2) Add object level structure corresponding to the five dots:
       - Sample five latent variables ~ N(0, 1): l1, l12, l3, l4, l45.
       - Pixel i of dots X1, X2, X3, X4, X5 are sampled as:
         X1i = l1 + l12 + Xi
         X2i = l12 + Xi
         X3i = 2 * l3 + Xi
         X4i = l4 + l45 + Xi
         X5i = l45 + Xi
         Note that:
         Pixels of dot X1 share a common variance that stem from l1 + l12.
         Pixels of dot X2 share a common variance that stem from l12.
         Pixels of dot X1 and pixel of dot X2 share a common variance that
         stem from l12.
         etc.
    4) Spatial Smoothing.
    5) Model: y = X beta + noise
    - Betas are null outside dots, and 1 or -1 depending on the dot:
        X1: 1, X2: -1, X3: 1, X4: 1, X5: -1.
    - Sample noise ~ N(0, 1)
    - Compute X beta then scale beta such that: r_squared(y, X beta) = r2
    Return X, y, beta

    Note that negative coeficients for X2 and X5 combined with the shared
    latent variable l12 and l45 make X2 and X5 suppressor regions ie.:
    regions are not correlated with y but
        y = X1 - X2 + X3 + X4 -X5 + noise
        y = l1 + l3 + l4 + noise
        So pixels of X2 and X5 are not correlated with the target y so they
        will not be detected by univariate analysis. However, they
        are usefull since they are suppressing unwilling variance that stem
        from latents l12 and l45.

Examples
--------
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import matplotlib.pyplot as plot
&gt;&gt;&gt; from parsimony.datasets import make_regression_struct
&gt;&gt;&gt; n_samples = 100
&gt;&gt;&gt; shape = (11, 11, 1)
&gt;&gt;&gt; X3d, y, beta3d = make_regression_struct(n_samples=n_samples,
...         shape=shape, r2=.5, random_seed=1)
&gt;&gt;&gt; X = X3d.reshape(n_samples, np.prod(shape))
&gt;&gt;&gt; beta = beta3d.ravel()
&gt;&gt;&gt; # from sklearn.metrics import r2_score
&gt;&gt;&gt; # print np.round(r2_score(y, np.dot(X, beta)), 2)
&gt;&gt;&gt; # 0.47
&gt;&gt;&gt; # cax = plot.matshow(beta3d.squeeze())
&gt;&gt;&gt; # plot.colorbar(cax)
&gt;&gt;&gt; # plot.title(&quot;Beta&quot;)
&gt;&gt;&gt; # plot.show()

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="make_classification_struct"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">make_classification_struct</span>(<span class="sig-arg">n_samples</span>=<span class="sig-default">100</span>,
        <span class="sig-arg">shape</span>=<span class="sig-default"><code class="variable-group">(</code>30<code class="variable-op">, </code>30<code class="variable-op">, </code>1<code class="variable-group">)</code></span>,
        <span class="sig-arg">snr</span>=<span class="sig-default">2.0</span>,
        <span class="sig-arg">sigma_logit</span>=<span class="sig-default">5.0</span>,
        <span class="sig-arg">random_seed</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">**kwargs</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="parsimony.datasets.samples_generator_struct-pysrc.html#make_classification_struct">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Generate classification samples (images + target variable) and beta.
Call make_regression_struct then apply the logistic function:
proba = 1. / (1 + exp(-(X * beta + noise)), then
y = 1 if proba &gt;= 0.5 else 0

Parameters
----------
See make_regression_struct, exept for r2 which is replaced by snr.

snr: Float. Default 2. Signal to noise ratio: std(X * beta) / std(noise)
        in 1. / (1 + exp(-(X * beta + noise))

sigma_logit: Float. Default is 5. The standard deviation of
    logit = X * beta + noise. Large sigma_logit promotes sharp shape of
    logistic function, ie: probabilities are close to 0 or 1, which
    increases likekihood.

Returns
-------
X3d: Numpy array of shape [n_sample, shape]. The input features.

y: Numpy array of shape [n_sample, 1]. The target variable.

beta3d: Float array of shape [shape]. It is the beta such that
y = 1. / (1 + exp(-(X * beta + noise)).

proba: Numpy array of shape [n_sample, 1]. Samples posterior probabilities.

See also
--------
make_regression_struct

Examples
--------
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import matplotlib.pyplot as plot
&gt;&gt;&gt; from parsimony.datasets import make_classification_struct
&gt;&gt;&gt; n_samples = 100
&gt;&gt;&gt; shape = (11, 11, 1)
&gt;&gt;&gt; X3d, y, beta3d, proba = make_classification_struct(n_samples=n_samples,
...     shape=shape, sigma_logit=1., random_seed=1)
&gt;&gt;&gt; print &quot;Likelihood=&quot;, np.prod(proba[y.ravel()==1]) * np.prod(1-proba[y.ravel()==0])
Likelihood= 1.98405647549e-18
&gt;&gt;&gt; # plot.plot(proba[y.ravel()==1], &quot;ro&quot;, proba[y.ravel()==0], &quot;bo&quot;)
&gt;&gt;&gt; # plot.show()
&gt;&gt;&gt; X3d, y, beta3d, proba = make_classification_struct(n_samples=n_samples,
...     shape=shape, sigma_logit=5., random_seed=1)
&gt;&gt;&gt; print &quot;Likelihood=&quot;, np.prod(proba[y.ravel()==1]) * np.prod(1-proba[y.ravel()==0])
Likelihood= 2.19102268035e-06
&gt;&gt;&gt; # plot.plot(proba[y.ravel()==1], &quot;ro&quot;, proba[y.ravel()==0], &quot;bo&quot;)
&gt;&gt;&gt; # plot.show()

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="parsimony-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Mar  7 11:10:01 2014
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
